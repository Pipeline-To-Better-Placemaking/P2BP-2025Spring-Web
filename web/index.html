<!DOCTYPE html>
<html>
<head>
  <title>Pipeline to Better Placemaking</title>
  <base href="/">

  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">

  <!-- iOS meta tags & icons -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Pipeline to Better Placemaking">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Tab Icon -->
  <link rel="icon" type="image/png" href="assets/icons/PTBP.png" />

  <!-- Google Maps JavaScript API -->
  <script
    type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDwn6wqGymn4bYA_PB8TorQDelDuHZvyOc&libraries=places&callback=initMap&v=weekly"
    async
    defer
  ></script>

  <link rel="manifest" href="manifest.json">
</head>
<body>
  <!-- Your Flutter app will be rendered here -->
  <script src="flutter_bootstrap.js" async></script>

  <script>
    // Define the initMap function for the Google Maps API callback
    function initMap() {
      // Check if geolocation is available
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          const lat = position.coords.latitude;
          const lng = position.coords.longitude;

          const mapOptions = {
            center: { lat: lat, lng: lng }, // Use current coordinates
            zoom: 12,
          };

          // Create the map with the user's current location
          const map = new google.maps.Map(document.getElementById('map'), mapOptions);

          // Optional: Add a marker at the user's location
          const marker = new google.maps.Marker({
            position: { lat: lat, lng: lng },
            map: map,
            title: 'You are here!',
          });
        }, function(error) {
          // Handle error if geolocation fails
          alert('Error: ' + error.message);
        });
      } else {
        alert('Geolocation is not supported by this browser.');
      }
    }
  </script>
</body>
</html>
